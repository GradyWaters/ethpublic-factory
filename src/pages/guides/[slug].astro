---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('posts');
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}


const { post } = Astro.props;
const { Content } = await post.render();
const seoTitle = `${post.data.title} — EthPublic`;
const seoDescription = post.data.description;
---
<BaseLayout title={seoTitle} description={seoDescription}>
  <style>
    .article-header { margin-bottom: 40px; padding-bottom: 32px; border-bottom: 1px solid var(--border); }
    .article-cat { font-family: 'IBM Plex Mono', monospace; font-size: 11px; color: var(--accent); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 16px; }
    .article-title { font-family: 'Merriweather', serif; font-size: 48px; font-weight: 700;  }
    .article-desc { font-size: 18px; color: #b0b0c8; line-height: 1.6; margin-bottom: 20px; }
    .article-meta { font-family: 'IBM Plex Mono', monospace; font-size: 12px; color: var(--gray); display: flex; gap: 12px; }
    .article-body { max-width: 720px; }
    .article-body h1, .article-body h2, .article-body h3 { font-family: 'Merriweather', serif; color: var(--white); font-weight: 700; margin: 48px 0 20px; }
    .article-body h1 { font-size: 36px; }
    .article-body h2 { font-size: 28px; }
    .article-body h3 { font-size: 22px; }
    .article-body p { font-size: 17px; line-height: 1.8; color: #c0c0d8; margin-bottom: 28px; }
    .article-body ul, .article-body ol { margin: 0 0 20px 0; padding-left: 40px; list-style-position: inside; }
    .article-body li { font-size: 17px; line-height: 1.8; color: #c0c0d8; margin-bottom: 8px; }
    .article-body a { color: #f5a623; text-decoration: none; }
    .article-body strong { color: var(--white); font-weight: 600; }
    .article-body blockquote { border-left: 3px solid var(--accent); padding-left: 20px; margin: 24px 0; color: #b0b0c8; font-style: italic; }
    .article-body code { font-family: 'IBM Plex Mono', monospace; font-size: 14px; background: var(--card); padding: 2px 6px; border-radius: 3px; color: var(--accent2); }
    .article-body pre { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 20px; overflow-x: auto; margin-bottom: 20px; }
    .back-link { display: inline-flex; align-items: center; gap: 8px; font-family: 'IBM Plex Mono', monospace; font-size: 12px; color: var(--gray); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 32px; transition: color 0.2s; }
    .back-link:hover { color: var(--accent); }
  </style>

  <a href="/" class="back-link">← Back to EthPublic</a>

  <div class="article-header">
    <div class="article-cat">{post.data.category}</div>
    <h1 class="article-title">{post.data.title}</h1>
    <p class="article-desc">{post.data.description}</p>
    <div class="article-meta">
      <span>{new Date(post.data.pubDate).toLocaleDateString('en-US', {month: 'long', day: 'numeric', year: 'numeric'})}</span>
      <span>·</span>
      <span>{post.data.category}</span>
    </div>
  </div>

  <div class="article-body">
    <Content />
  </div>
</BaseLayout>
